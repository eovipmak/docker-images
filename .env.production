# Production Environment Configuration Template
# Copy this file to .env and update with your production values
# IMPORTANT: Never commit .env files with real credentials to version control

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL database credentials
# SECURITY: Use strong passwords in production
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_THIS_IN_PRODUCTION
POSTGRES_DB=v_insight

# ============================================================================
# Backend API Configuration
# ============================================================================
BACKEND_PORT=8080

# JWT Secret for authentication
# SECURITY: Generate a strong random secret (at least 32 characters)
# Example: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_RANDOM_SECRET_IN_PRODUCTION

# ============================================================================
# Worker Configuration
# ============================================================================
WORKER_PORT=8081

# ============================================================================
# Frontend Configuration
# ============================================================================
FRONTEND_PORT=3000

# Public API URL - The URL browsers use to connect to the backend
# For production with reverse proxy: https://yourdomain.com
# For production without reverse proxy: http://YOUR_SERVER_IP:8080
PUBLIC_API_URL=http://localhost:8080

# Comma-separated list of allowed hosts for Vite
# Add your production domain(s) here
# Example: VITE_ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com,www.yourdomain.com
VITE_ALLOWED_HOSTS=localhost,127.0.0.1

# ============================================================================
# Environment
# ============================================================================
ENV=production

# ============================================================================
# Security Configuration
# ============================================================================
# HSTS (HTTP Strict Transport Security) max age in seconds
# Default: 31536000 (1 year)
# Set to 0 to disable HSTS (not recommended for production)
HSTS_MAX_AGE=31536000

# Include subdomains in HSTS policy
# Set to true to enforce HTTPS on all subdomains
HSTS_INCLUDE_SUBDOMAINS=true

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
# Per-IP rate limit: requests per minute
# Protects against brute force attacks
RATE_LIMIT_PER_IP=100

# Per-user rate limit: requests per hour
# Prevents abuse from authenticated users
RATE_LIMIT_PER_USER=1000

# ============================================================================
# Deployment Notes
# ============================================================================
# 
# 1. Database Password:
#    - Generate a strong password: openssl rand -base64 32
#    - Update POSTGRES_PASSWORD with the generated value
#
# 2. JWT Secret:
#    - Generate a secure secret: openssl rand -base64 32
#    - Update JWT_SECRET with the generated value
#
# 3. Domain Configuration:
#    - Update PUBLIC_API_URL with your production domain or server IP
#    - Add your domain to VITE_ALLOWED_HOSTS
#
# 4. HTTPS/SSL:
#    - If using HTTPS, ensure PUBLIC_API_URL starts with https://
#    - Keep HSTS_MAX_AGE enabled for production
#    - Configure reverse proxy (Nginx/Traefik) for SSL termination
#
# 5. Backups:
#    - Regular database backups are created in ./backups directory
#    - Ensure backups are copied to secure off-site storage
#
# 6. Monitoring:
#    - Backend health: http://your-server:8080/health
#    - Backend readiness: http://your-server:8080/health/ready
#    - Backend liveness: http://your-server:8080/health/live
#    - Worker health: http://your-server:8081/health
#    - Worker readiness: http://your-server:8081/health/ready
#    - Worker liveness: http://your-server:8081/health/live
#
# ============================================================================
