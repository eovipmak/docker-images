import{g as b,a as S,r as h,b as R,j as s,s as z,c as E,d as H,P as M,e as w,u as B,C,f as I,T as r,B as l}from"./index-kHEeuirq.js";import{A as D,G as d,C as g,E as f,a as v,g as V,b as N}from"./api-WGiOro81.js";function P(t){return b("MuiCard",t)}S("MuiCard",["root"]);const _=t=>{const{classes:e}=t;return H({root:["root"]},P,e)},A=z(M,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})({overflow:"hidden"}),j=h.forwardRef(function(e,i){const o=R({props:e,name:"MuiCard"}),{className:m,raised:c=!1,...u}=o,n={...o,raised:c},x=_(n);return s.jsx(A,{className:E(x.root,m),elevation:c?8:void 0,ref:i,ownerState:n,...u})});function L(t){return b("MuiCardContent",t)}S("MuiCardContent",["root"]);const T=t=>{const{classes:e}=t;return H({root:["root"]},L,e)},W=z("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:16,"&:last-child":{paddingBottom:24}}),p=h.forwardRef(function(e,i){const o=R({props:e,name:"MuiCardContent"}),{className:m,component:c="div",...u}=o,n={...o,component:c},x=T(n);return s.jsx(W,{as:c,className:E(x.root,m),ownerState:n,ref:i,...u})}),k=w(s.jsx("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Domain"),$=()=>{const{t}=B(),[e,i]=h.useState(null),[o,m]=h.useState([]),[c,u]=h.useState(!0),[n,x]=h.useState(null);return h.useEffect(()=>{(async()=>{try{u(!0),x(null);const[y,U]=await Promise.all([V(),N(void 0,5)]);i(y.stats),m(U.history||[])}catch(y){x(y instanceof Error?y.message:"Failed to fetch data")}finally{u(!1)}})()},[]),c?s.jsx(C,{maxWidth:"lg",sx:{mt:4,mb:4,display:"flex",justifyContent:"center"},children:s.jsx(I,{})}):n?s.jsx(C,{maxWidth:"lg",sx:{mt:4,mb:4},children:s.jsx(D,{severity:"error",children:n})}):s.jsxs(C,{maxWidth:"lg",sx:{mt:4,mb:4},children:[s.jsx(r,{variant:"h4",component:"h1",gutterBottom:!0,children:t("dashboard")}),s.jsxs(d,{container:!0,spacing:3,sx:{mb:4},children:[s.jsx(d,{item:!0,xs:12,sm:6,md:3,children:s.jsx(j,{children:s.jsxs(p,{children:[s.jsx(r,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Total Checks"}),s.jsx(r,{variant:"h4",children:e?.total_checks||0})]})})}),s.jsx(d,{item:!0,xs:12,sm:6,md:3,children:s.jsx(j,{children:s.jsxs(p,{children:[s.jsxs(l,{display:"flex",alignItems:"center",gap:1,children:[s.jsx(g,{color:"success"}),s.jsx(r,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Successful"})]}),s.jsx(r,{variant:"h4",color:"success.main",children:e?.successful_checks||0})]})})}),s.jsx(d,{item:!0,xs:12,sm:6,md:3,children:s.jsx(j,{children:s.jsxs(p,{children:[s.jsxs(l,{display:"flex",alignItems:"center",gap:1,children:[s.jsx(f,{color:"error"}),s.jsx(r,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Errors"})]}),s.jsx(r,{variant:"h4",color:"error.main",children:e?.error_checks||0})]})})}),s.jsx(d,{item:!0,xs:12,sm:6,md:3,children:s.jsx(j,{children:s.jsxs(p,{children:[s.jsxs(l,{display:"flex",alignItems:"center",gap:1,children:[s.jsx(k,{color:"primary"}),s.jsx(r,{color:"text.secondary",gutterBottom:!0,variant:"body2",children:"Unique Domains"})]}),s.jsx(r,{variant:"h4",color:"primary.main",children:e?.unique_domains||0})]})})})]}),s.jsxs(M,{elevation:2,sx:{p:3},children:[s.jsx(r,{variant:"h6",gutterBottom:!0,children:"Recent SSL Checks"}),o.length===0?s.jsx(r,{variant:"body2",color:"text.secondary",children:"No checks found. Start by adding a domain to monitor."}):s.jsx(d,{container:!0,spacing:2,children:o.map(a=>s.jsx(d,{item:!0,xs:12,children:s.jsx(j,{variant:"outlined",children:s.jsx(p,{children:s.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[s.jsxs(l,{display:"flex",alignItems:"center",gap:2,children:[a.status==="success"?s.jsx(g,{color:"success"}):s.jsx(f,{color:"error"}),s.jsxs(l,{children:[s.jsx(r,{variant:"h6",children:a.domain||"N/A"}),s.jsxs(r,{variant:"body2",color:"text.secondary",children:[t("checkedAt"),": ",new Date(a.checked_at).toLocaleString()]})]})]}),s.jsxs(l,{display:"flex",gap:1,children:[s.jsx(v,{label:a.status==="success"?t("statusSuccess"):t("statusError"),color:a.status==="success"?"success":"error"}),a.status==="success"&&a.data?.ssl?.daysUntilExpiration!=null&&s.jsx(v,{label:`${a.data.ssl.daysUntilExpiration} days`,color:a.data.ssl.daysUntilExpiration<30?"warning":"default"})]})]})})})},a.id))})]})]})};export{$ as default};
